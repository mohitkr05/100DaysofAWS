# AWS Lambda with S3 and SNS

1. Create a lambda function. We are going to use the blueprint already provide by AWS


![alt text](images/lambda-1.png)

2. The lambda function would need a role to access S3. We are going to create a new role by template provided by AWS

![alt text](images/lambda-2.png)

3. The lambda function is a Python code that can be modified

![alt text](images/lambda-3.png)

4. Configure the trigger or event from the producer. We are going to "listen" to event generated by S3 on `PUT` requests for any `*.jpg` file in `images/` prefix.

![alt text](images/lambda-4.png)

5. The source trigger is configured and the function should look like images

![alt text](images/lambda-5.png)


6. Add the SNS topic 

![alt text](images/lambda-6.png)


7. Final configuration should look like this 

![alt text](images/lambda-7.png)

8. If you upload a file on the bucket you should get an email notification

![alt text](images/lambda-8.png)


9. To cleanup, delete the Lambda function, S3 bucket and SNS topic